<div class="container-fluid">
  <div class="row">
    <div class="col-lg-2 bg-success">
      <app-sidebar></app-sidebar>
    </div>
    <div class="col">
      <h1 class="text-center fw-bolder">
        {{ editingRecipeId ? 'Edit Recipe' : 'Add Recipe Details' }}
      </h1>

      <div class="container my-5 text-center rounded p-3 shadow w-75">
        <!-- Recipe Image -->
        <img *ngIf="recipeDetails.image" width="100px" [src]="recipeDetails.image" alt="No Image">

        <div class="row mt-3">
          <!-- Left Column -->
          <div class="col-6">
            <input type="text" [(ngModel)]="recipeDetails.name" placeholder="Recipe Name" class="form-control mb-2">
            <input type="text" [(ngModel)]="recipeDetails.prepTimeMinutes" placeholder="Prep Time" class="form-control mb-2">

            <label>Choose Cuisine</label>
            <select [(ngModel)]="recipeDetails.cuisine" class="form-control mb-2">
              <option disabled selected hidden>Choose Cuisine Type</option>
              <option *ngFor="let cuisine of ['Italian','Asian','American','Mexican','Pakistani','Japanese','Thai','Indian','Turkish','Smoothie']" [value]="cuisine">
                {{ cuisine }}
              </option>
            </select>

            <input type="text" [(ngModel)]="recipeDetails.image" placeholder="Image URL" class="form-control mb-2">

            <!-- Ingredients -->
            <div class="d-flex align-items-center mb-2">
              <textarea #ingredientsInput placeholder="Ingredients" class="form-control"></textarea>
              <button (click)="addIngredients(ingredientsInput.value); ingredientsInput.value=''" class="btn btn-primary ms-2">+</button>
            </div>
            <div *ngIf="ingredients.length>0">
              <div *ngFor="let item of ingredients; let i = index" class="d-flex align-items-center mb-2">
                <input type="text" [value]="item" class="form-control" readonly>
                <button (click)="removeIngredient(item)" class="btn"><i class="fa-solid fa-trash text-danger"></i></button>
              </div>
            </div>
          </div>

          <!-- Right Column -->
          <div class="col-6">
            <input type="text" [(ngModel)]="recipeDetails.cookTimeMinutes" placeholder="Cooking Time" class="form-control mb-2">
            <input type="text" [(ngModel)]="recipeDetails.servings" placeholder="Servings" class="form-control mb-2">

            <label>Mode of Cooking</label>
            <select [(ngModel)]="recipeDetails.difficulty" class="form-control mb-2">
              <option disabled selected hidden>Choose Difficulty</option>
              <option *ngFor="let diff of ['Easy','Medium','Hard']" [value]="diff">{{ diff }}</option>
            </select>

            <input type="text" [(ngModel)]="recipeDetails.caloriesPerServing" placeholder="Calories per Unit" class="form-control mb-2">

            <!-- Instructions -->
            <div class="d-flex align-items-center mb-2">
              <textarea #instructionInput placeholder="Instructions" class="form-control"></textarea>
              <button (click)="addInstruction(instructionInput.value); instructionInput.value=''" class="btn btn-primary ms-2">+</button>
            </div>
            <div *ngIf="instructions.length>0">
              <div *ngFor="let item of instructions" class="d-flex align-items-center mb-2">
                <input type="text" [value]="item" class="form-control" readonly>
                <button (click)="removeInstruction(item)" class="btn"><i class="fa-solid fa-trash text-danger"></i></button>
              </div>
            </div>
          </div>
        </div>

        <!-- Meal Type -->
        <div class="border rounded p-2 mb-2">
          <label>Choose Meal-Type:</label>
          <div *ngFor="let meal of ['Dinner','Lunch','Dessert','Appetizer','Breakfast','Beverage','Salad']" class="form-check form-check-inline">
            <input type="checkbox" [checked]="mealType.includes(meal)" (change)="toggleMealType($event, meal)" class="form-check-input">
            <label class="form-check-label">{{ meal }}</label>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="mb-2">
          <button *ngIf="!editingRecipeId" (click)="saveRecipe()" class="btn btn-primary">Add Recipe</button>
          <button *ngIf="editingRecipeId" (click)="saveRecipe()" class="btn btn-success me-2">Save Changes</button>
          <button *ngIf="editingRecipeId" (click)="router.navigateByUrl('/admin/recipe-list')" class="btn btn-secondary">Cancel</button>
        </div>
      </div>
    </div>
  </div>
</div>
